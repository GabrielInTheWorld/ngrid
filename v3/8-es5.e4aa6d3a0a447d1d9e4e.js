!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"M1+n":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i,r=n("ugF5"),o=n("ofXK"),a=n("f6nW"),s=n("XEBs"),l=n("4dOD"),u=n("NRLV"),c=n("fdU2"),f=n("fXoL"),d=((i=function e(){h(this,e)}).NGRID_PLUGIN=Object(s.u)({id:r.a},r.b),i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=f.Sb({type:i}),i.\u0275inj=f.Rb({imports:[[o.c,a.r,s.j,l.a]]}),i);f.Jc(u.a,[u.c,c.a],[])},NRLV:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return d});var i=n("XEBs"),r=n("fXoL");function o(e,t){1&e&&r.Vb(0,"pbl-ngrid-row",1)}var l=function(){var e=function(e){s(n,e);var t=u(n);function n(e,i){var r;return h(this,n),(r=t.call(this,e,i)).kind="detailRow",r}return n}(i.q);return e.\u0275fac=function(t){return new(t||e)(r.Ub(r.R),r.Ub(i.n))},e.\u0275dir=r.Pb({type:e,selectors:[["","pblNgridDetailRowDef",""]],inputs:{hasAnimation:["pblNgridDetailRowDefHasAnimation","hasAnimation"]},features:[r.Eb]}),e}(),c=function(){var e=function(e){s(n,e);var t=u(n);function n(){return h(this,n),t.apply(this,arguments)}return a(n,[{key:"ngOnInit",value:function(){this.registry.setSingle("detailRowParent",this)}},{key:"ngOnDestroy",value:function(){this.registry.getSingle("detailRowParent")===this&&this.registry.setSingle("detailRowParent",void 0)}}]),n}(i.p);return e.\u0275fac=function(t){return f(t||e)},e.\u0275dir=r.Pb({type:e,selectors:[["","pblNgridDetailRowParentRef",""]],inputs:{columns:["pblNgridDetailRowParentRef","columns"],when:["pblNgridDetailRowParentRefWhen","when"]},features:[r.Eb]}),e}(),f=r.cc(c),d=function(){var e=function e(){h(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Ob({type:e,selectors:[["pbl-ngrid-default-detail-row-parent"]],decls:1,vars:0,consts:[["detailRow","",4,"pblNgridDetailRowParentRef"],["detailRow",""]],template:function(e,t){1&e&&r.Qc(0,o,1,0,"pbl-ngrid-row",0)},encapsulation:2}),e}()},fdU2:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("fXoL"),o=n("FtGj"),l=n("f6nW"),c=n("DcT9"),d=n("XEBs"),p=n("ugF5"),w=["viewRef"],g=["detailRow",""],R=[[["",8,"pbl-ngrid-row-prefix"]],[["",8,"pbl-ngrid-row-suffix"]]],v=[".pbl-ngrid-row-prefix",".pbl-ngrid-row-suffix"],y=function(){var e=function(e){s(n,e);var t=u(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).opened=!1,e}return a(n,[{key:"ngOnInit",value:function(){var e=this;r(f(n.prototype),"ngOnInit",this).call(this),this.plugin.addDetailRow(this);var t=this._extApi.pluginCtrl.getPlugin("targetEvents");t.cellClick.pipe(Object(c.q)(this)).subscribe(function(t){if("data"===t.type&&t.row===e.context.$implicit){var n=e.plugin.excludeToggleFrom;n&&n.some(function(e){return t.column.id===e})||e.toggle()}}),t.rowClick.pipe(Object(c.q)(this)).subscribe(function(t){t.root||"data"!==t.type||t.row!==e.context.$implicit||e.toggle()})}},{key:"ngOnDestroy",value:function(){c.q.kill(this),this.plugin.removeDetailRow(this),this.controller.clearDetailRow(this,!0),r(f(n.prototype),"ngOnDestroy",this).call(this)}},{key:"updateRow",value:function(){if(r(f(n.prototype),"updateRow",this).call(this)){switch(this.plugin.whenContextChange){case"context":var e=!!this.context.getExternal("detailRow");e&&this.opened?this.controller.updateDetailRow(this):this.toggle(e,!0);break;case"render":this.opened&&this.controller.updateDetailRow(this);break;case"close":this.toggle(!1,!0)}return this.plugin.markForCheck(),this.controller.detectChanges(this),this.plugin.toggledRowContextChange.next(this),!0}return!1}},{key:"toggle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.opened!==e){var n=!1;this.opened?(this.controller.clearDetailRow(this,t),this.element.classList.remove("pbl-row-detail-opened")):this.controller.render(this,t)&&(n=!0,this.element.classList.add("pbl-row-detail-opened")),this.opened!==n&&(this.opened=n,this.context.setExternal("detailRow",n,!0),this.plugin.detailRowToggled(this))}}},{key:"handleKeydown",value:function(e){if(e.target===this.element){var t=e.keyCode;(t===o.f||t===o.n)&&(e.preventDefault(),this.toggle())}}},{key:"onCtor",value:function(){r(f(n.prototype),"onCtor",this).call(this),this.plugin=this._extApi.pluginCtrl.getPlugin(p.a),this.controller=this.plugin.detailRowCtrl}},{key:"expended",get:function(){return this.opened}},{key:"height",get:function(){return r(f(n.prototype),"height",this)+this.controller.getDetailRowHeight(this)}},{key:"row",get:function(){return this.context.$implicit}}]),n}(d.o);return e.\u0275fac=function(t){return b(t||e)},e.\u0275cmp=i.Ob({type:e,selectors:[["pbl-ngrid-row","detailRow",""]],viewQuery:function(e,t){var n;(1&e&&i.Zc(w,3,i.V),2&e)&&(i.Dc(n=i.mc())&&(t._viewRef=n.first))},hostAttrs:["role","row",1,"pbl-ngrid-row","pbl-row-detail-parent"],hostVars:1,hostBindings:function(e,t){1&e&&i.lc("keydown",function(e){return t.handleKeydown(e)}),2&e&&i.Ib("tabindex",t.grid.rowFocus)},exportAs:["pblNgridDetailRow"],features:[i.Gb([{provide:l.o,useExisting:e}]),i.Eb],attrs:g,ngContentSelectors:v,decls:4,vars:0,consts:[["viewRef",""]],template:function(e,t){1&e&&(i.vc(R),i.uc(0),i.Wb(1,null,0),i.uc(3,1))},styles:[".pbl-row-detail-parent { position: relative; cursor: pointer; }"],encapsulation:2,changeDetection:0}),e}(),b=i.cc(y)},ugF5:function(n,i,r){"use strict";r.d(i,"a",function(){return d}),r.d(i,"b",function(){return g});var o,s=r("fXoL"),l=r("8LU1"),u=r("XEBs"),c=r("NRLV"),f=function(){function n(e,i){var r=this;h(this,n),this.vcRef=e,this.extApi=i,this.viewMap=new Map,this.pendingOps=new Map,this.deferOps=!1,this.runMeasure=function(){return r.extApi.grid.viewport.reMeasureCurrentRenderedContent()},i.onInit(function(){r.detailRowDef=i.grid.registry.getSingle("detailRow"),i.cdkTable.beforeRenderRows.subscribe(function(){return r.deferOps=!0}),i.cdkTable.onRenderRows.subscribe(function(){return r.flushPendingOps()})}),i.grid.registry.changes.subscribe(function(e){var n,i=t(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;switch(o.type){case"detailRow":r.detailRowDef="remove"===o.op?void 0:o.value}}}catch(a){i.e(a)}finally{i.f()}})}return a(n,[{key:"render",value:function(e,t){return this.viewMap.has(e)?(this.pendingOps.delete(e),this.updateDetailRow(e),!0):this.deferOps?!(!e.context.$implicit||!this.detailRowDef||(this.pendingOps.set(e,{type:"render",fromRender:t}),0)):this._render(e,t)}},{key:"clearDetailRow",value:function(e,t){this.viewMap.get(e)&&(this.deferOps?this.pendingOps.set(e,{type:"clear",fromRender:t}):this._clearDetailRow(e,t))}},{key:"updateDetailRow",value:function(e){var t=this.viewMap.get(e);t&&(Object.assign(t.viewRef.context,this.createDetailRowContext(e,!0)),t.viewRef.detectChanges())}},{key:"getDetailRowHeight",value:function(e){var n=0,i=this.viewMap.get(e);if(i){var r,o=t(i.viewRef.rootNodes);try{for(o.s();!(r=o.n()).done;){n+=r.value.getBoundingClientRect().height}}catch(a){o.e(a)}finally{o.f()}}return n}},{key:"detectChanges",value:function(e){var t=this.viewMap.get(e);t&&t.viewRef.detectChanges()}},{key:"createDetailRowContext",value:function(e,t){var n=this;return{$implicit:e.context.$implicit,rowContext:e.context,animation:{fromRender:t,end:function(){return n.checkHasAnimation(t)?n.runMeasure():void 0}}}}},{key:"flushPendingOps",value:function(){if(this.deferOps){this.deferOps=!1;var n,i=[],r=[],o=t(this.pendingOps.entries());try{for(o.s();!(n=o.n()).done;){var a=n.value;("clear"===a[1].type?r:i).push(a)}}catch(v){o.e(v)}finally{o.f()}this.pendingOps.clear();for(var s=0,l=i;s<l.length;s++){var u=e(l[s],2),c=u[0],f=u[1];if(this.viewMap.has(c))return;if(r.length){var h=e(r.pop(),1)[0];this.viewMap.set(c,this.viewMap.get(h)),this.viewMap.delete(h),this.insertElementsToRow(c),this.updateDetailRow(c),this.checkHasAnimation(f.fromRender)||this.runMeasure()}else this._render(c,f.fromRender)}for(var d=0,p=r;d<p.length;d++){var w=e(p[d],2),g=w[0],R=w[1];this._clearDetailRow(g,R.fromRender)}}}},{key:"_render",value:function(e,t){if(e.context.$implicit&&this.detailRowDef){var n=this.createDetailRowContext(e,t);return this.viewMap.set(e,{viewRef:this.vcRef.createEmbeddedView(this.detailRowDef.tRef,n)}),this.insertElementsToRow(e,!0),this.checkHasAnimation(t)||this.runMeasure(),!0}return!1}},{key:"_clearDetailRow",value:function(e,t){var n=this.viewMap.get(e);if(n){var i=n.viewRef;i.context.animation.fromRender!==t&&(i.context.animation.fromRender=t,i.detectChanges()),i.destroy(),this.checkHasAnimation(t)||this.runMeasure(),this.viewMap.delete(e)}}},{key:"insertElementsToRow",value:function(e,n){var i,r=this.viewMap.get(e).viewRef,o=e.element.nextSibling,a=t(r.rootNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;e.element.parentElement.insertBefore(s,o)}}catch(l){a.e(l)}finally{a.f()}n&&r.detectChanges()}},{key:"checkHasAnimation",value:function(e){return"always"===this.detailRowDef.hasAnimation||"interaction"===this.detailRowDef.hasAnimation&&!e}}]),n}(),d="detailRow",p=function(){return!0},w=function(){return!1},g=((o=function(){function e(n,i,r,o){var a=this;h(this,e),this.pluginCtrl=i,this.ngZone=r,this.injector=o,this.whenContextChange="context",this.toggleChange=new s.p,this.toggledRowContextChange=new s.p,this._isSimpleRow=p,this._isDetailRow=w,this._detailRowRows=new Set,this._removePlugin=i.setPlugin(d,this),this.grid=i.extApi.grid,this.detailRowCtrl=new f(n,i.extApi),i.onInit().subscribe(function(){i.ensurePlugin("targetEvents"),a.grid.registry.changes.subscribe(function(e){var n,i=t(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;switch(r.type){case"detailRowParent":"remove"===r.op&&(a.pluginCtrl.extApi.cdkTable.removeRowDef(r.value),a._detailRowDef=void 0),a.setupDetailRowParent()}}}catch(o){i.e(o)}finally{i.f()}}),a._detailRow?a.updateTable():a.setupDetailRowParent()})}return a(e,[{key:"addDetailRow",value:function(e){this._detailRowRows.add(e)}},{key:"removeDetailRow",value:function(e){this._detailRowRows.delete(e)}},{key:"toggleDetailRow",value:function(e,n){var i,r=t(this._detailRowRows);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.context.$implicit===e)return o.toggle(n),o.expended}}catch(a){r.e(a)}finally{r.f()}}},{key:"markForCheck",value:function(){var e=this;this._cdPending||(this._cdPending=!0,this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){e.ngZone.run(function(){var t;e._cdPending=!1,null===(t=e._defaultParentRef)||void 0===t||t.changeDetectorRef.markForCheck()})})}))}},{key:"ngOnDestroy",value:function(){this._defaultParentRef&&this._defaultParentRef.destroy(),this._removePlugin(this.grid)}},{key:"detailRowToggled",value:function(e){var t=this._openedRow&&this._openedRow.row===e.row;e.expended?(this._forceSingle&&this._openedRow&&this._openedRow.expended&&!t&&this._openedRow.toggle(),this._openedRow=e):t&&(this._openedRow=void 0),this.toggleChange.emit(e)}},{key:"setupDetailRowParent",value:function(){var e=this;if(this._detailRowDef&&(this.pluginCtrl.extApi.cdkTable.removeRowDef(this._detailRowDef),this._detailRowDef=void 0),this.detailRow){var t=this.pluginCtrl.extApi.registry.getSingle("detailRowParent");if(t)this._detailRowDef=t=t.clone(),Object.defineProperty(t,"when",{enumerable:!0,get:function(){return e._isDetailRow}});else if(!this._defaultParentRef)return this._defaultParentRef=this.injector.get(s.j).resolveComponentFactory(c.a).create(this.injector),void this._defaultParentRef.changeDetectorRef.detectChanges()}this.resetTableRowDefs()}},{key:"resetTableRowDefs",value:function(){this._detailRowDef&&(!1===this._detailRow?this.pluginCtrl.extApi.cdkTable.removeRowDef(this._detailRowDef):this.pluginCtrl.extApi.cdkTable.addRowDef(this._detailRowDef))}},{key:"updateTable",value:function(){this.grid._tableRowDef.when=this._isSimpleRow,this.setupDetailRowParent(),this.pluginCtrl.extApi.cdkTable.updateRowDefCache(),this.pluginCtrl.extApi.cdkTable.multiTemplateDataRows=!!this._detailRow}},{key:"detailRow",get:function(){return this._detailRow},set:function(e){if(this._detailRow!==e){var t=this.grid;"function"==typeof e?(this._isSimpleRow=function(t,n){return!e(t,n)},this._isDetailRow=e):(e=Object(l.c)(e),this._isDetailRow=e?p:w,this._isSimpleRow=e?w:p),this._detailRow=e,t.isInit&&this.updateTable()}}},{key:"singleDetailRow",set:function(e){if(e=Object(l.c)(e),this._forceSingle!==e&&(this._forceSingle=e,e&&this._openedRow&&this._openedRow.expended)){var n,i=t(this._detailRowRows);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.context.$implicit!==this._openedRow.row&&r.toggle(!1)}}catch(o){i.e(o)}finally{i.f()}}}}]),e}()).\u0275fac=function(e){return new(e||o)(s.Ub(s.V),s.Ub(u.m),s.Ub(s.E),s.Ub(s.v))},o.\u0275dir=s.Pb({type:o,selectors:[["pbl-ngrid","detailRow",""]],inputs:{detailRow:"detailRow",singleDetailRow:"singleDetailRow",excludeToggleFrom:"excludeToggleFrom",whenContextChange:"whenContextChange"},outputs:{toggleChange:"toggleChange",toggledRowContextChange:"toggledRowContextChange"},exportAs:["pblNgridDetailRow"]}),o)}}])}();